
@model MaSV_MyStore.Models.ViewModel.ProductDetailsVM

@{
    ViewBag.Title = "Chi tiết sản phẩm: " + Model.Product.ProductName;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="text-primary mb-4">CHI TIẾT SẢN PHẨM</h2>

<div class="row">
    @* --- KHỐI BÊN TRÁI: ẢNH VÀ THÔNG TIN CHÍNH --- *@
    <div class="col-md-6">
        <div class="card p-4 shadow-sm">
            <h3 class="card-title">@Model.Product.ProductName</h3>

            @* ẢNH SẢN PHẨM *@
            <img src="@Model.Product.ProductImage" alt="@Model.Product.ProductName" class="img-fluid mb-4" style="max-height: 400px; object-fit: contain;" />

            <p><strong>Danh mục:</strong> @Model.Product.Category.CategoryName</p>

            <p class="h4 text-danger fw-bold">
                Giá: @Model.Product.ProductPrice.ToString("N0") ₫
            </p>
        </div>
    </div>

    @* --- KHỐI BÊN PHẢI: MÔ TẢ & CHỨC NĂNG MUA HÀNG --- *@
    <div class="col-md-6">
        <div class="card p-4 shadow-sm h-100">
            <h4>Mô tả sản phẩm</h4>
            <p>@Model.Product.ProductDescription</p>

            <hr />

            @* FORM CHỌN MUA (Gửi đến Action AddToCart trong CartController) *@
            @using (Html.BeginForm("AddToCart", "Cart", FormMethod.Post, new { @class = "mt-3" }))
            {
                @Html.AntiForgeryToken()
                @Html.Hidden("id", Model.Product.ProductID) @* Truyền ID sản phẩm *@

                <div class="form-group mb-3">
                    <label for="quantity">Số lượng</label>
                    <input type="number" name="quantity" id="quantity" value="1" min="1" class="form-control w-50" />
                </div>

                <p class="h5 mt-4">
                    Tạm tính:
                    <span class="text-success fw-bold">
                        @Model.Product.ProductPrice.ToString("N0") ₫
                    </span>
                </p>

                <button type="submit" class="btn btn-primary btn-lg mt-3">
                    <i class="fas fa-cart-plus me-2"></i> Thêm vào giỏ hàng
                </button>
            }
        </div>
    </div>
</div>

<hr class="my-5" />

@* --- SẢN PHẨM TƯƠNG TỰ (Related Products) --- *@
@if (Model.RelatedProducts != null && Model.RelatedProducts.Any())
{
    <h3>Sản phẩm tương tự</h3>
    @Html.Partial("_PVRelatedProduct", Model.RelatedProducts) @* Cần tạo Partial View này *@
}

<hr class="my-5" />

@* --- SẢN PHẨM BÁN CHẠY (Top Products) --- *@
@if (Model.TopProducts != null && Model.TopProducts.Any())
{
    <h3>Sản phẩm bán chạy cùng danh mục</h3>
    @Html.Partial("_PVTopProduct", Model.TopProducts) @* Cần tạo Partial View này *@
}